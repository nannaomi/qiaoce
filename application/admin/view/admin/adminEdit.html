{include file="public/header" /}

<body>
<article class="page-container">
	<form class="form form-horizontal" id="form">
	<div class="row cl">
		<label class="form-label col-xs-4 col-sm-3">管&nbsp;&nbsp;&nbsp;理&nbsp;&nbsp;&nbsp;员：</label>
		<div class="formControls col-xs-8 col-sm-9">
			<input type="text" class="input-text" value="{$data.username}" placeholder="请输入姓名" id="adminName" name="username">
		</div>
	</div>
	<div class="row cl">
		<label class="form-label col-xs-4 col-sm-3">新&nbsp;&nbsp;&nbsp;密&nbsp;&nbsp;&nbsp;码：</label>
		<div class="formControls col-xs-8 col-sm-9">
			<input type="password" class="input-text" autocomplete="off" value="" placeholder="请输入6~16位由字母、数字、下划线组成的字符，其中字母和数字必须同时存在，区分大小写" id="password" name="password">
		</div>
	</div>
	<div class="row cl">
		<label class="form-label col-xs-4 col-sm-3">确认新密码：</label>
		<div class="formControls col-xs-8 col-sm-9">
			<input type="password" class="input-text" autocomplete="off"  placeholder="确认新密码" id="password2" name="password2">
		</div>
	</div>


    <input type="hidden" value="{$data.userid}" name="id">
	<div class="row cl">
		<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
			<a onclick="save_add()" class="btn btn-primary radius" href="javascript:;"> 保存并发布</a>
			<a onClick="layer_close();" class="btn btn-default radius" >&nbsp;&nbsp;取消&nbsp;&nbsp;</a>
		</div>
	</div>
	</form>
</article>

</body>
{include file="public/footer" /}

<script >
    function save_add(){
      var form=new FormData($("#form")[0]);

        $.ajax({
            url: '{:url("ajaxEdit")}',
            type: 'post',
            data: form,
            processData: false,  // 告诉jQuery不要去处理发送的数据
            contentType: false,   // 告诉jQuery不要去设置Content-Type请求头
            dataType: 'json',
            success:function (data) {
                    layer.msg(data,{icon:2,time:1500});
            }
            ,error: function (XmlHttpRequest, textStatus, errorThrown) {
                layer.msg('修改成功！', {icon: 1, time: 1300}, function () {
                    var index = parent.layer.getFrameIndex(window.name);
                    parent.location.reload(); //刷新父页面
                    parent.layer.close(index);
                });
            }
        });






	}


</script>